[
  {
    "resource_id": "Function_1",
    "resource_type": "AWS::Lambda::Function",
    "detected_issue": "Under-provisioned memory and overly tight timeout causing timeouts and potential retries.",
    "reasoning": "At 128 MB, the function has the minimum CPU share. Hitting a 3s timeout suggests the function is CPU- or I/O-constrained and is being terminated, which can trigger retries depending on the event source and lead to multiple billed invocations.",
    "optimization_suggestion": "Increase memory to 256–512 MB to boost CPU and reduce duration, then set timeout slightly above the p95/p99 duration (e.g., 5–10s after measurement). Use AWS Lambda Power Tuning to find the cost-optimal memory setting. Monitor CloudWatch Duration and Errors to ensure timeouts and retries drop."
  },
  {
    "resource_id": "Function_2",
    "resource_type": "AWS::Lambda::Function",
    "detected_issue": "Over-provisioned memory (1024 MB) and unnecessarily high timeout for a sub-second workload.",
    "reasoning": "Lambda charges by GB-seconds. Running <1s with 1024 MB inflates GB-second cost versus smaller memory sizes that would likely still complete within the same sub-second window.",
    "optimization_suggestion": "Gradually downsize memory to 512 MB, then 256 MB (potentially 128 MB) while validating latency and correctness; this can reduce GB-second cost by up to 75% moving from 1024 MB to 256 MB. Reduce timeout to a value just above observed p99 (e.g., ~2–3s) to prevent excessively long runs if anomalies occur. Validate using AWS Lambda Power Tuning."
  },
  {
    "resource_id": "Function_3",
    "resource_type": "AWS::Lambda::Function",
    "detected_issue": "Memory likely higher than needed for a low-CPU, ~2s workload; timeout set far above normal duration.",
    "reasoning": "With low CPU load and short executions, 256 MB may be more than required. A 30s timeout does not directly add cost per invocation but increases exposure to longer-than-necessary billed run time if issues arise.",
    "optimization_suggestion": "Test reducing memory to 128 MB and verify duration remains acceptable to lower GB-second cost. Set timeout closer to observed p99 (e.g., ~5–10s) to cap potential runaway costs. Use AWS Lambda Power Tuning and monitor CloudWatch Duration percentiles during the change."
  }
]